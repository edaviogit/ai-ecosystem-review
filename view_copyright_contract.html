<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‰ˆæƒåˆçº¦æŸ¥çœ‹å™¨</title>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .info-card {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid #4CAF50;
        }
        .hash-display {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            word-break: break-all;
            margin: 10px 0;
        }
        .button {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            margin: 10px 5px;
            transition: all 0.3s;
        }
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        .status {
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        .status.success {
            background: rgba(76, 175, 80, 0.3);
            border: 1px solid #4CAF50;
        }
        .status.error {
            background: rgba(244, 67, 54, 0.3);
            border: 1px solid #f44336;
        }
        .status.info {
            background: rgba(33, 150, 243, 0.3);
            border: 1px solid #2196F3;
        }
        .link {
            color: #81C784;
            text-decoration: none;
        }
        .link:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ” AIæ–‡æ¡£ç‰ˆæƒåˆçº¦æŸ¥çœ‹å™¨</h1>
            <p>æŸ¥çœ‹æ‚¨åœ¨ Polygon åŒºå—é“¾ä¸Šçš„ç‰ˆæƒä¿æŠ¤è®°å½•</p>
        </div>

        <div class="info-card">
            <h3>ğŸ“‹ åˆçº¦åŸºæœ¬ä¿¡æ¯</h3>
            <p><strong>åˆçº¦åœ°å€:</strong></p>
            <div class="hash-display">0xF4ca090fB8edfE207a8FCe21ac383CC8A769fB5A</div>
            <p><strong>ç½‘ç»œ:</strong> Polygon Mainnet (Chain ID: 137)</p>
            <p><strong>åˆçº¦ç±»å‹:</strong> CopyrightRegistry</p>
            <p><strong>éƒ¨ç½²åŒºå—:</strong> 74345428</p>
            <p><strong>éƒ¨ç½²è€…:</strong> 0xaDb1fc541dEbc2c2336f0A60f36B15b718b9D79a</p>
        </div>

        <div class="info-card">
            <h3>ğŸ“„ å·²æ³¨å†Œç‰ˆæƒä¿¡æ¯</h3>
            <p><strong>æ–‡æ¡£æ ‡é¢˜:</strong> AIè®¡ç®—ç”Ÿæ€ç»¼è¿°ï¼šé€‰å¯¹æŠ€æœ¯æ ˆ</p>
            <p><strong>ä½œè€…å§“å:</strong> Lu Dawei (é™†å¤§ä¸º)</p>
            <p><strong>ä½œè€…åœ°å€:</strong> 0xaDb1fc541dEbc2c2336f0A60f36B15b718b9D79a</p>
            <p><strong>è®¸å¯è¯:</strong> CC-BY-4.0 (å¼€æºè®¸å¯)</p>
            <p><strong>å†…å®¹å“ˆå¸Œ:</strong></p>
            <div class="hash-display">0194f60c68f8e65582b16a71153ea864bbec06a50f42310cfe6a9794598130d5</div>
            <p><strong>æ³¨å†ŒåŒºå—:</strong> 74345904</p>
            <p><strong>æ³¨å†ŒçŠ¶æ€:</strong> âœ… å·²ç¡®è®¤</p>
        </div>

        <div class="info-card">
            <h3>ğŸ”— åŒºå—é“¾æµè§ˆå™¨é“¾æ¥</h3>
            <p><strong>åˆçº¦é¡µé¢:</strong></p>
            <p><a href="https://polygonscan.com/address/0xF4ca090fB8edfE207a8FCe21ac383CC8A769fB5A" target="_blank" class="link">
                åœ¨ PolygonScan ä¸ŠæŸ¥çœ‹åˆçº¦ â†’
            </a></p>
            
            <p><strong>éƒ¨ç½²äº¤æ˜“:</strong></p>
            <p><a href="https://polygonscan.com/tx/0x1e918f4e9e7c6379af6eb5aa386c90047c5ce48dac496bb03baa4ed8dd5c8a04" target="_blank" class="link">
                æŸ¥çœ‹éƒ¨ç½²äº¤æ˜“ â†’
            </a></p>
            
            <p><strong>æ³¨å†Œäº¤æ˜“:</strong></p>
            <p><a href="https://polygonscan.com/address/0xF4ca090fB8edfE207a8FCe21ac383CC8A769fB5A" target="_blank" class="link">
                åœ¨åˆçº¦é¡µé¢æŸ¥çœ‹æ‰€æœ‰äº¤æ˜“ â†’
            </a></p>
        </div>

        <div class="info-card">
            <h3>ğŸ› ï¸ åˆçº¦åŠŸèƒ½</h3>
            <button class="button" onclick="verifyCopyright()">ğŸ” éªŒè¯ç‰ˆæƒ</button>
            <button class="button" onclick="getCopyrightInfo()">ğŸ“‹ è·å–è¯¦ç»†ä¿¡æ¯</button>
            <button class="button" onclick="getAuthorWorks()">ğŸ“š æŸ¥çœ‹ä½œè€…ä½œå“</button>
            <div id="result-display"></div>
        </div>

        <div class="info-card">
            <h3>ğŸ’¡ ä½¿ç”¨è¯´æ˜</h3>
            <ul>
                <li><strong>éªŒè¯ç‰ˆæƒ:</strong> ç¡®è®¤æ–‡æ¡£çš„ç‰ˆæƒä¿æŠ¤çŠ¶æ€</li>
                <li><strong>è·å–è¯¦ç»†ä¿¡æ¯:</strong> æŸ¥çœ‹å®Œæ•´çš„ç‰ˆæƒè®°å½•</li>
                <li><strong>æŸ¥çœ‹ä½œè€…ä½œå“:</strong> åˆ—å‡ºè¯¥ä½œè€…çš„æ‰€æœ‰æ³¨å†Œä½œå“</li>
                <li><strong>åŒºå—é“¾æµè§ˆå™¨:</strong> åœ¨ PolygonScan ä¸ŠæŸ¥çœ‹å®Œæ•´çš„é“¾ä¸Šè®°å½•</li>
            </ul>
        </div>

        <div class="info-card">
            <h3>ğŸ¯ éªŒè¯æ–¹æ³•</h3>
            <p><strong>ä»»ä½•äººéƒ½å¯ä»¥éªŒè¯è¿™ä¸ªç‰ˆæƒè®°å½•ï¼š</strong></p>
            <ol>
                <li>è®¿é—® <a href="https://remix.ethereum.org" target="_blank" class="link">Remix IDE</a></li>
                <li>è¿æ¥åˆ° Polygon ç½‘ç»œ</li>
                <li>ä½¿ç”¨åˆçº¦åœ°å€: <code>0xF4ca090fB8edfE207a8FCe21ac383CC8A769fB5A</code></li>
                <li>è°ƒç”¨ <code>verifyCopyright</code> å‡½æ•°</li>
                <li>è¾“å…¥æ–‡æ¡£å“ˆå¸Œã€ä½œè€…åœ°å€å’Œæ ‡é¢˜</li>
                <li>åº”è¯¥è¿”å› <code>true</code> âœ…</li>
            </ol>
        </div>
    </div>

    <script>
        const CONTRACT_ADDRESS = '0xF4ca090fB8edfE207a8FCe21ac383CC8A769fB5A';
        const CONTENT_HASH = '0194f60c68f8e65582b16a71153ea864bbec06a50f42310cfe6a9794598130d5';
        const AUTHOR_ADDRESS = '0xaDb1fc541dEbc2c2336f0A60f36B15b718b9D79a';
        const AUTHOR_NAME = 'Lu Dawei (é™†å¤§ä¸º)';
        const TITLE = 'AIè®¡ç®—ç”Ÿæ€ç»¼è¿°ï¼šé€‰å¯¹æŠ€æœ¯æ ˆ';

        const CONTRACT_ABI = [
            {
                "inputs": [
                    {"name": "_contentHash", "type": "string"},
                    {"name": "_author", "type": "address"},
                    {"name": "_title", "type": "string"}
                ],
                "name": "verifyCopyright",
                "outputs": [{"name": "", "type": "bool"}],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [
                    {"name": "_contentHash", "type": "string"},
                    {"name": "_author", "type": "address"},
                    {"name": "_title", "type": "string"}
                ],
                "name": "getCopyright",
                "outputs": [
                    {"name": "", "type": "string"},
                    {"name": "", "type": "string"},
                    {"name": "", "type": "address"},
                    {"name": "", "type": "uint256"},
                    {"name": "", "type": "string"}
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [{"name": "_author", "type": "address"}],
                "name": "getAuthorWorks",
                "outputs": [{"name": "", "type": "bytes32[]"}],
                "stateMutability": "view",
                "type": "function"
            }
        ];

        let web3;
        let contract;

        async function initWeb3() {
            if (typeof window.ethereum !== 'undefined') {
                web3 = new Web3(window.ethereum);
            } else {
                web3 = new Web3('https://polygon-rpc.com');
            }
            contract = new web3.eth.Contract(CONTRACT_ABI, CONTRACT_ADDRESS);
        }

        async function verifyCopyright() {
            const resultDiv = document.getElementById('result-display');
            resultDiv.innerHTML = '<div class="status info">ğŸ” æ­£åœ¨éªŒè¯ç‰ˆæƒ...</div>';
            
            try {
                await initWeb3();
                const result = await contract.methods.verifyCopyright(
                    CONTENT_HASH,
                    AUTHOR_ADDRESS,
                    TITLE
                ).call();
                
                if (result) {
                    resultDiv.innerHTML = '<div class="status success">âœ… ç‰ˆæƒéªŒè¯æˆåŠŸï¼è¯¥æ–‡æ¡£ç¡®å®å—åˆ°åŒºå—é“¾ä¿æŠ¤ã€‚</div>';
                } else {
                    resultDiv.innerHTML = '<div class="status error">âŒ ç‰ˆæƒéªŒè¯å¤±è´¥ï¼æœªæ‰¾åˆ°ç›¸å…³è®°å½•ã€‚</div>';
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="status error">âŒ éªŒè¯è¿‡ç¨‹å‡ºé”™: ${error.message}</div>`;
            }
        }

        async function getCopyrightInfo() {
            const resultDiv = document.getElementById('result-display');
            resultDiv.innerHTML = '<div class="status info">ğŸ“‹ æ­£åœ¨è·å–ç‰ˆæƒä¿¡æ¯...</div>';
            
            try {
                await initWeb3();
                const result = await contract.methods.getCopyright(
                    CONTENT_HASH,
                    AUTHOR_ADDRESS,
                    TITLE
                ).call();
                
                const timestamp = new Date(result[3] * 1000).toLocaleString('zh-CN');
                
                resultDiv.innerHTML = `
                    <div class="status success">
                        <h4>ğŸ“‹ ç‰ˆæƒè¯¦ç»†ä¿¡æ¯</h4>
                        <p><strong>å†…å®¹å“ˆå¸Œ:</strong> ${result[0]}</p>
                        <p><strong>æ ‡é¢˜:</strong> ${result[1]}</p>
                        <p><strong>ä½œè€…:</strong> ${result[2]}</p>
                        <p><strong>æ³¨å†Œæ—¶é—´:</strong> ${timestamp}</p>
                        <p><strong>è®¸å¯è¯:</strong> ${result[4]}</p>
                    </div>
                `;
            } catch (error) {
                resultDiv.innerHTML = `<div class="status error">âŒ è·å–ä¿¡æ¯å¤±è´¥: ${error.message}</div>`;
            }
        }

        async function getAuthorWorks() {
            const resultDiv = document.getElementById('result-display');
            resultDiv.innerHTML = '<div class="status info">ğŸ“š æ­£åœ¨æŸ¥è¯¢ä½œè€…ä½œå“...</div>';
            
            try {
                await initWeb3();
                const result = await contract.methods.getAuthorWorks(AUTHOR_ADDRESS).call();
                
                resultDiv.innerHTML = `
                    <div class="status success">
                        <h4>ğŸ“š ä½œè€…ä½œå“åˆ—è¡¨</h4>
                        <p><strong>ä½œè€…å§“å:</strong> ${AUTHOR_NAME}</p>
                        <p><strong>ä½œè€…åœ°å€:</strong> ${AUTHOR_ADDRESS}</p>
                        <p><strong>ä½œå“æ•°é‡:</strong> ${result.length}</p>
                        <p><strong>ä½œå“ID:</strong></p>
                        ${result.map(id => `<div class="hash-display">${id}</div>`).join('')}
                    </div>
                `;
            } catch (error) {
                resultDiv.innerHTML = `<div class="status error">âŒ æŸ¥è¯¢å¤±è´¥: ${error.message}</div>`;
            }
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨éªŒè¯
        window.addEventListener('load', function() {
            setTimeout(verifyCopyright, 1000);
        });
    </script>
</body>
</html> 